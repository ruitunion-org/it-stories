import{u as U,e as se,f as te,g as z,h as ae,P as re,t as le,i as ie,j as L,k as E,l as De,w as Y,m as t,n as oe,R as T,p as ue,q as ne,s as Be,C as ce,v as ve,x as pe,y as ye,z as de,A as he,B as ge,D as me,E as $,F as I,G as fe,H as R,I as ke}from"./app-Nksj8KFg.js";const He=["/","/stories/","/stories/2023-07-24-australian-story/","/stories/2023-08-07-avito-story-1/","/stories/2023-08-04-gop-stop-story/","/stories/2023-08-15-gamedev-story/","/stories/2023-08-31-chinese-guy/","/stories/2023-09-27-work-experience-in-koshelek-company/","/stories/2023-10-13-trial-period/","/stories/2023-10-18-juniors-knock-out-salaries/","/stories/2023-10-25-why-not-cut-wages/","/stories/2023-11-27-story/","/stories/2024-03-06-mol-spec-v-gos-med/","/stories/2024-03-20-razvod-sotrudnikov-in-like-center/","/stories/2024-03-29-fairytale-kingdom-nix-solutions/","/stories/2024-04-08-story-super-web/","/stories/2024-04-17-team-vs-team-lead/","/stories/2024-04-19-revolution-on-construction-site/","/stories/2024-04-22-it-story-citilink-merlion/","/stories/2024-06-07-zastryt-v-autstaffe-itstory/","/stories/2024-06-19-mafia-fundcount/","/stories/2024-06-21-how-the-employer-suffered-from-the-prosecutors-office/","/stories/2024-11-30-samolet-layoffs/","/stories/2024-12-12-fictitious-premium-as-indexation/index.ru.html","/404.html","/stories/2024-12-12-fictitious-premium-as-indexation/","/category/","/category/news/","/category/posts/","/tag/","/tag/mercury-development/","/tag/%D0%B7%D0%B0%D1%80%D0%BF%D0%BB%D0%B0%D1%82%D0%B0/","/tag/%D0%B4%D0%B6%D1%83%D0%BD%D1%8B/","/tag/%D1%81%D1%82%D0%B0%D0%B6%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0/","/tag/%D0%B2%D0%BE%D0%B9%D1%82%D0%B8-%D0%B2-it/","/tag/%D0%BC%D0%B5%D0%B4%D1%83%D1%87%D1%80%D0%B5%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/","/tag/%D0%BB%D0%B0%D0%B9%D0%BA-%D1%86%D0%B5%D0%BD%D1%82%D1%80/","/tag/%D1%82%D1%80%D1%83%D0%B4%D0%BE%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%BE/","/tag/%D0%B0%D1%8F%D0%B7-%D1%88%D0%B0%D0%B1%D1%83%D1%82%D0%B4%D0%B8%D0%BD%D0%BE%D0%B2/","/tag/%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0/","/tag/%D1%83%D0%B2%D0%BE%D0%BB%D1%8C%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5/","/tag/%D1%82%D1%80%D1%83%D0%B4%D0%BE%D0%B2%D1%8B%D0%B5-%D0%BE%D1%82%D0%BD%D0%BE%D1%88%D0%B5%D0%BD%D0%B8%D1%8F/","/tag/%D0%B8%D0%BD%D0%B4%D0%B5%D0%BA%D1%81%D0%B0%D1%86%D0%B8%D1%8F/","/tag/%D1%81%D1%83%D0%B4/","/tag/%D0%B0%D1%83%D1%82%D1%81%D1%82%D0%B0%D1%84/","/tag/fundcount/","/tag/%D1%82%D0%B0%D0%B3%D0%B8%D0%BB-%D1%82%D0%B5%D0%BB%D0%B5%D0%BA%D0%BE%D0%BC/","/tag/%D1%81%D0%B0%D0%BC%D0%BE%D0%BB%D1%91%D1%82/","/tag/proptech/","/tag/%D1%81%D0%BE%D0%BA%D1%80%D0%B0%D1%89%D0%B5%D0%BD%D0%B8%D1%8F/","/tag/%C2%AB%D0%B0%D0%BC%D1%82-%D0%B3%D1%80%D1%83%D0%BF%C2%BB/","/tag/%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B9-%D0%B8%D0%BD%D1%82%D0%B5%D0%B3%D1%80%D0%B0%D1%82%D0%BE%D1%80/","/tag/%D1%84%D0%B8%D0%BA%D1%82%D0%B8%D0%B2%D0%BD%D1%8B%D0%B5-%D0%BF%D1%80%D0%B5%D0%BC%D0%B8%D0%B8/","/article/","/star/","/timeline/"],we="SEARCH_PRO_QUERY_HISTORY",h=U(we,[]),Ee=()=>{const{queryHistoryCount:a}=R,r=a>0;return{enabled:r,queryHistory:h,addQueryHistory:l=>{r&&(h.value=Array.from(new Set([l,...h.value.slice(0,a-1)])))},removeQueryHistory:l=>{h.value=[...h.value.slice(0,l),...h.value.slice(l+1)]}}},b=a=>He[a.id]+("anchor"in a?`#${a.anchor}`:""),Re="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:_}=R,g=U(Re,[]),Ce=()=>{const a=_>0;return{enabled:a,resultHistory:g,addResultHistory:r=>{if(a){const l={link:b(r),display:r.display};"header"in r&&(l.header=r.header),g.value=[l,...g.value.slice(0,_-1)]}},removeResultHistory:r=>{g.value=[...g.value.slice(0,r),...g.value.slice(r+1)]}}},xe=a=>{const r=ce(),l=z(),C=ve(),D=L(0),k=E(()=>D.value>0),p=pe([]);return ye(()=>{const{search:y,terminate:x}=de(),m=fe(n=>{const f=n.join(" "),{searchFilter:Q=v=>v,splitWord:q,suggestionsFilter:P,...d}=r.value;f?(D.value+=1,y(n.join(" "),l.value,d).then(v=>Q(v,f,l.value,C.value)).then(v=>{D.value-=1,p.value=v}).catch(v=>{console.warn(v),D.value-=1,D.value||(p.value=[])})):p.value=[]},R.searchDelay-R.suggestDelay);Y([a,l],([n])=>m(n),{immediate:!0}),he(()=>{x()})}),{isSearching:k,results:p}};var qe=se({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:r}){const l=te(),C=z(),D=ae(re),{enabled:k,addQueryHistory:p,queryHistory:y,removeQueryHistory:x}=Ee(),{enabled:m,resultHistory:n,addResultHistory:f,removeResultHistory:Q}=Ce(),q=k||m,P=le(a,"queries"),{results:d,isSearching:v}=xe(P),i=ie({isQuery:!0,index:0}),B=L(0),c=L(0),j=E(()=>q&&(y.value.length>0||n.value.length>0)),A=E(()=>d.value.length>0),F=E(()=>d.value[B.value]||null),M=()=>{const{isQuery:e,index:s}=i;s===0?(i.isQuery=!e,i.index=e?n.value.length-1:y.value.length-1):i.index=s-1},G=()=>{const{isQuery:e,index:s}=i;s===(e?y.value.length-1:n.value.length-1)?(i.isQuery=!e,i.index=0):i.index=s+1},V=()=>{B.value=B.value>0?B.value-1:d.value.length-1,c.value=F.value.contents.length-1},J=()=>{B.value=B.value<d.value.length-1?B.value+1:0,c.value=0},K=()=>{c.value<F.value.contents.length-1?c.value+=1:J()},N=()=>{c.value>0?c.value-=1:V()},S=e=>e.map(s=>ke(s)?s:t(s[0],s[1])),W=e=>{if(e.type==="customField"){const s=ge[e.index]||"$content",[o,w=""]=me(s)?s[C.value].split("$content"):s.split("$content");return e.display.map(u=>t("div",S([o,...u,w])))}return e.display.map(s=>t("div",S(s)))},H=()=>{B.value=0,c.value=0,r("updateQuery",""),r("close")},X=()=>k?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},D.value.queryHistory),y.value.map((e,s)=>t("div",{class:["search-pro-result-item",{active:i.isQuery&&i.index===s}],onClick:()=>{r("updateQuery",e)}},[t($,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:o=>{o.preventDefault(),o.stopPropagation(),x(s)}})]))])):null,Z=()=>m?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},D.value.resultHistory),n.value.map((e,s)=>t(T,{to:e.link,class:["search-pro-result-item",{active:!i.isQuery&&i.index===s}],onClick:()=>{H()}},()=>[t($,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(o=>S(o)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:o=>{o.preventDefault(),o.stopPropagation(),Q(s)}})]))])):null;return De("keydown",e=>{if(a.isFocusing){if(A.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const s=F.value.contents[c.value];p(a.queries.join(" ")),f(s),l.push(b(s)),H()}}else if(m){if(e.key==="ArrowUp")M();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:s}=i;i.isQuery?(r("updateQuery",y.value[s]),e.preventDefault()):(l.push(n.value[s].link),H())}}}}),Y([B,c],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:a.queries.length?!A.value:!j.value}],id:"search-pro-results"},a.queries.length?v.value?t(oe,{hint:D.value.searching}):A.value?t("ul",{class:"search-pro-result-list"},d.value.map(({title:e,contents:s},o)=>{const w=B.value===o;return t("li",{class:["search-pro-result-list-item",{active:w}]},[t("div",{class:"search-pro-result-title"},e||D.value.defaultTitle),s.map((u,ee)=>{const O=w&&c.value===ee;return t(T,{to:b(u),class:["search-pro-result-item",{active:O,"aria-selected":O}],onClick:()=>{p(a.queries.join(" ")),f(u),H()}},()=>[u.type==="text"?null:t(u.type==="title"?ue:u.type==="heading"?ne:Be,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[u.type==="text"&&u.header?t("div",{class:"content-header"},u.header):null,t("div",W(u))])])})])})):D.value.emptyResult:q?j.value?[X(),Z()]:D.value.emptyHistory:D.value.emptyResult)}});export{qe as default};
