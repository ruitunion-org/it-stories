import{u as U,e as se,f as te,g as z,h as ae,P as re,t as le,i as ie,j as L,k as E,l as oe,w as Y,m as t,n as ue,R as T,p as De,q as ne,s as ce,C as ve,v as Be,x as pe,y as ye,z as de,A as he,B as ge,D as me,E as $,F as I,G as fe,H as R,I as ke}from"./app-BQB4L3SL.js";const He=["/","/stories/","/stories/2023-07-24-australian-story/","/stories/2023-08-07-avito-story-1/","/stories/2023-08-04-gop-stop-story/","/stories/2023-08-15-gamedev-story/","/stories/2023-08-31-chinese-guy/","/stories/2023-09-27-work-experience-in-koshelek-company/","/stories/2023-10-13-trial-period/","/stories/2023-10-18-juniors-knock-out-salaries/","/stories/2023-10-25-why-not-cut-wages/","/stories/2023-11-27-story/","/stories/2024-03-06-mol-spec-v-gos-med/","/stories/2024-03-20-razvod-sotrudnikov-in-like-center/","/stories/2024-03-29-fairytale-kingdom-nix-solutions/","/stories/2024-04-08-story-super-web/","/stories/2024-04-17-team-vs-team-lead/","/stories/2024-04-19-revolution-on-construction-site/","/stories/2024-04-22-it-story-citilink-merlion/","/stories/2024-06-07-zastryt-v-autstaffe-itstory/","/stories/2024-06-19-mafia-fundcount/","/stories/2024-06-21-how-the-employer-suffered-from-the-prosecutors-office/","/stories/2024-11-30-samolet-layoffs/","/404.html","/category/","/category/news/","/category/posts/","/tag/","/tag/mercury-development/","/tag/%D0%B7%D0%B0%D1%80%D0%BF%D0%BB%D0%B0%D1%82%D0%B0/","/tag/%D0%B4%D0%B6%D1%83%D0%BD%D1%8B/","/tag/%D1%81%D1%82%D0%B0%D0%B6%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0/","/tag/%D0%B2%D0%BE%D0%B9%D1%82%D0%B8-%D0%B2-it/","/tag/%D0%BC%D0%B5%D0%B4%D1%83%D1%87%D1%80%D0%B5%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/","/tag/%D0%BB%D0%B0%D0%B9%D0%BA-%D1%86%D0%B5%D0%BD%D1%82%D1%80/","/tag/%D1%82%D1%80%D1%83%D0%B4%D0%BE%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%BE/","/tag/%D0%B0%D1%8F%D0%B7-%D1%88%D0%B0%D0%B1%D1%83%D1%82%D0%B4%D0%B8%D0%BD%D0%BE%D0%B2/","/tag/%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0/","/tag/%D1%83%D0%B2%D0%BE%D0%BB%D1%8C%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5/","/tag/%D1%82%D1%80%D1%83%D0%B4%D0%BE%D0%B2%D1%8B%D0%B5-%D0%BE%D1%82%D0%BD%D0%BE%D1%88%D0%B5%D0%BD%D0%B8%D1%8F/","/tag/%D0%B8%D0%BD%D0%B4%D0%B5%D0%BA%D1%81%D0%B0%D1%86%D0%B8%D1%8F/","/tag/%D1%81%D1%83%D0%B4/","/tag/%D0%B0%D1%83%D1%82%D1%81%D1%82%D0%B0%D1%84/","/tag/fundcount/","/tag/%D1%82%D0%B0%D0%B3%D0%B8%D0%BB-%D1%82%D0%B5%D0%BB%D0%B5%D0%BA%D0%BE%D0%BC/","/tag/%D1%81%D0%B0%D0%BC%D0%BE%D0%BB%D1%91%D1%82/","/tag/proptech/","/tag/%D1%81%D0%BE%D0%BA%D1%80%D0%B0%D1%89%D0%B5%D0%BD%D0%B8%D1%8F/","/article/","/star/","/timeline/"],we="SEARCH_PRO_QUERY_HISTORY",h=U(we,[]),Ee=()=>{const{queryHistoryCount:a}=R,r=a>0;return{enabled:r,queryHistory:h,addQueryHistory:l=>{r&&(h.value=Array.from(new Set([l,...h.value.slice(0,a-1)])))},removeQueryHistory:l=>{h.value=[...h.value.slice(0,l),...h.value.slice(l+1)]}}},b=a=>He[a.id]+("anchor"in a?`#${a.anchor}`:""),Re="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:_}=R,g=U(Re,[]),xe=()=>{const a=_>0;return{enabled:a,resultHistory:g,addResultHistory:r=>{if(a){const l={link:b(r),display:r.display};"header"in r&&(l.header=r.header),g.value=[l,...g.value.slice(0,_-1)]}},removeResultHistory:r=>{g.value=[...g.value.slice(0,r),...g.value.slice(r+1)]}}},Qe=a=>{const r=ve(),l=z(),x=Be(),o=L(0),k=E(()=>o.value>0),p=pe([]);return ye(()=>{const{search:y,terminate:Q}=de(),m=fe(n=>{const f=n.join(" "),{searchFilter:C=B=>B,splitWord:q,suggestionsFilter:P,...d}=r.value;f?(o.value+=1,y(n.join(" "),l.value,d).then(B=>C(B,f,l.value,x.value)).then(B=>{o.value-=1,p.value=B}).catch(B=>{console.warn(B),o.value-=1,o.value||(p.value=[])})):p.value=[]},R.searchDelay-R.suggestDelay);Y([a,l],([n])=>m(n),{immediate:!0}),he(()=>{Q()})}),{isSearching:k,results:p}};var qe=se({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:r}){const l=te(),x=z(),o=ae(re),{enabled:k,addQueryHistory:p,queryHistory:y,removeQueryHistory:Q}=Ee(),{enabled:m,resultHistory:n,addResultHistory:f,removeResultHistory:C}=xe(),q=k||m,P=le(a,"queries"),{results:d,isSearching:B}=Qe(P),i=ie({isQuery:!0,index:0}),c=L(0),v=L(0),j=E(()=>q&&(y.value.length>0||n.value.length>0)),A=E(()=>d.value.length>0),S=E(()=>d.value[c.value]||null),M=()=>{const{isQuery:e,index:s}=i;s===0?(i.isQuery=!e,i.index=e?n.value.length-1:y.value.length-1):i.index=s-1},G=()=>{const{isQuery:e,index:s}=i;s===(e?y.value.length-1:n.value.length-1)?(i.isQuery=!e,i.index=0):i.index=s+1},V=()=>{c.value=c.value>0?c.value-1:d.value.length-1,v.value=S.value.contents.length-1},J=()=>{c.value=c.value<d.value.length-1?c.value+1:0,v.value=0},K=()=>{v.value<S.value.contents.length-1?v.value+=1:J()},N=()=>{v.value>0?v.value-=1:V()},F=e=>e.map(s=>ke(s)?s:t(s[0],s[1])),W=e=>{if(e.type==="customField"){const s=ge[e.index]||"$content",[u,w=""]=me(s)?s[x.value].split("$content"):s.split("$content");return e.display.map(D=>t("div",F([u,...D,w])))}return e.display.map(s=>t("div",F(s)))},H=()=>{c.value=0,v.value=0,r("updateQuery",""),r("close")},X=()=>k?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},o.value.queryHistory),y.value.map((e,s)=>t("div",{class:["search-pro-result-item",{active:i.isQuery&&i.index===s}],onClick:()=>{r("updateQuery",e)}},[t($,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:u=>{u.preventDefault(),u.stopPropagation(),Q(s)}})]))])):null,Z=()=>m?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},o.value.resultHistory),n.value.map((e,s)=>t(T,{to:e.link,class:["search-pro-result-item",{active:!i.isQuery&&i.index===s}],onClick:()=>{H()}},()=>[t($,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(u=>F(u)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:u=>{u.preventDefault(),u.stopPropagation(),C(s)}})]))])):null;return oe("keydown",e=>{if(a.isFocusing){if(A.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const s=S.value.contents[v.value];p(a.queries.join(" ")),f(s),l.push(b(s)),H()}}else if(m){if(e.key==="ArrowUp")M();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:s}=i;i.isQuery?(r("updateQuery",y.value[s]),e.preventDefault()):(l.push(n.value[s].link),H())}}}}),Y([c,v],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:a.queries.length?!A.value:!j.value}],id:"search-pro-results"},a.queries.length?B.value?t(ue,{hint:o.value.searching}):A.value?t("ul",{class:"search-pro-result-list"},d.value.map(({title:e,contents:s},u)=>{const w=c.value===u;return t("li",{class:["search-pro-result-list-item",{active:w}]},[t("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),s.map((D,ee)=>{const O=w&&v.value===ee;return t(T,{to:b(D),class:["search-pro-result-item",{active:O,"aria-selected":O}],onClick:()=>{p(a.queries.join(" ")),f(D),H()}},()=>[D.type==="text"?null:t(D.type==="title"?De:D.type==="heading"?ne:ce,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[D.type==="text"&&D.header?t("div",{class:"content-header"},D.header):null,t("div",W(D))])])})])})):o.value.emptyResult:q?j.value?[X(),Z()]:o.value.emptyHistory:o.value.emptyResult)}});export{qe as default};
